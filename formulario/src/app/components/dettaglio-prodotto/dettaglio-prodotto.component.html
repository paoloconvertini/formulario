<div class="container" >
  <div class="row">
    <div class="col-md-9 ordine-title">
      {{prodotto.nome}}
      <button (click)="modifica(prodotto)" mat-icon-button matTooltip="Modifica" class="pointer">
        <mat-icon aria-hidden="false" aria-label="modifica" fontIcon="edit" color="primary"></mat-icon>
      </button>
      <button  mat-icon-button (click)="stampa()" matTooltip="stampa formula" class="pointer">
        <mat-icon fontIcon="print" color="primary"></mat-icon>
      </button>
    </div>
    <div class="col-md-3 col-lg-3 col-sm-3">
      <span style="font-size: 11px">Ultima modifica: {{prodotto.updateDate | date:'dd/MM/yyyy HH:mm'}}</span>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">
      <div class="mat-elevation-z8">
        <table class="table" style="margin: 0 20px;font-size:12px">
          <thead class="thead-light">
          <tr>
            <td class="header">Materia prima</td>
            <td class="header">U.M.</td>
            <td class="header"></td>
            <td class="header">% MP</td>
            <td class="header">U.M.</td>
            <td class="header">TOTALE x Miscel. QL20</td>
            <td class="header">Prezzo X QL.</td>
            <td class="header">TOTALE COSTO x QL20</td>
            <td class="header">TOTALE COSTO x QL1</td>
          </tr>
          </thead>
          <tbody>
            <tr *ngFor="let materia of prodottoMateriePrimeList">
              <td class="header">{{materia.materiaPrimaNome}}</td>
              <td>KG</td>
              <td>{{materia.percentuale*20}}</td>
              <td>{{materia.percentuale}}%</td>
              <td>QL</td>
              <td>{{materia.percentuale*20/100 | number : '1.3-3'}}</td>
              <td>{{materia.materiaPrimaPrezzo | currency: 'EUR':'symbol'}}</td>
              <td>{{materia.materiaPrimaPrezzo*materia.percentuale*20/100 | currency: 'EUR':'symbol'}}</td>
              <td>{{materia.materiaPrimaPrezzo*materia.percentuale/100 | currency: 'EUR':'symbol': '1.3-3'}}</td>
            </tr>
            <tr>
              <td class="header">Totali</td>
              <td>KG</td>
              <td>{{totMassa}}</td>
              <td>{{sommaPerc}}%</td>
              <td>QL</td>
              <td>{{totMiscela20 | number : '1.3-3'}}</td>
              <td></td>
              <td>{{prezzo20 | currency: 'EUR':'symbol'}}</td>
              <td style="background-color: red; color: white; font-size: larger">{{prezzoUnitario | currency: 'EUR':'symbol': '1.3-3' }}</td>
            </tr>
            <tr>
              <td class="header">{{imballo.materiaPrimaNome}}</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td>{{imballo.materiaPrimaPrezzo | currency: 'EUR':'symbol'}}</td>
              <td>{{imballo.materiaPrimaPrezzo*20 | currency: 'EUR':'symbol'}}</td>
              <td>{{imballo.materiaPrimaPrezzo | currency: 'EUR':'symbol': '1.3-3'}}</td>
            </tr>
            <tr style="border-bottom: 1px;">
              <td class="header">{{lavoro.materiaPrimaNome}}</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td>{{lavoro.materiaPrimaPrezzo | currency: 'EUR':'symbol'}}</td>
              <td>{{lavoro.materiaPrimaPrezzo*20 | currency: 'EUR':'symbol'}}</td>
              <td>{{lavoro.materiaPrimaPrezzo | currency: 'EUR':'symbol': '1.3-3'}}</td>
            </tr>
            <tr style="border-bottom: 4px double">
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td style="color:#728E58">Totale con lavoro e imballo</td>
              <td style="color: #ffffff;background-color: #728E58;">{{imballo.materiaPrimaPrezzo + lavoro.materiaPrimaPrezzo + prezzoUnitario | currency: 'EUR':'symbol'}}</td>
            </tr>
            <tr *ngFor="let listino of listini">
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td>Ricarico {{listino.valoreListinoId}}</td>
              <td>{{listino.ricavo | currency: 'EUR':'symbol'}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>



